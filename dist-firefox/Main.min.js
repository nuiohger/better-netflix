!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s=class{constructor(t,e){this._updatingVideo=!1,this._uiController=t,this._timeUiController=e}start(){if(!this._updatingVideo&&(void 0===this._htmlVideo||""===this._htmlVideo.src)&&"https://www.netflix.com/browse"!==location.href){this._updatingVideo=!0;const t=this;this._updateVideoInterval=setInterval(()=>{t.updateVideo()},500)}}updateVideo(){this.findVideo()&&(clearInterval(this._updateVideoInterval),this._updatingVideo=!1,this._timeUiController.setTimeInterval(this._htmlVideo),this._uiController.createUi(this))}findVideo(){return this._htmlVideo=document.getElementsByClassName("VideoContainer")[0],void 0!==this._htmlVideo&&location.toString().indexOf("/watch")>0&&(this._htmlVideo=this._htmlVideo.getElementsByTagName("video")[0],void 0!==this._htmlVideo)&&(this.initVideo(),!0)}initVideo(){this._htmlVideo.style.position="relative",this._htmlVideo.style.left="50%",this._htmlVideo.style.top="50%",this._htmlVideo.style.transform="translate(-50%, -50%)"}addZoom(t){let e=parseInt(this._htmlVideo.style.height);isNaN(e)&&(e=100),this.setZoom(t+e)}setZoom(t){t<100&&(t=100),this._htmlVideo.style.height=this._htmlVideo.style.width=t+"%"}get getHtmlVideo(){return this._htmlVideo}};var o=class{getSync(t,e){chrome.storage.sync.get(t,e)}getSyncPromise(t){return new Promise(e=>chrome.storage.sync.get(t,e))}};var n={zoomIn:"+",zoomOut:"-",resetZoom:",",fullZoom:".",disableMouse:"d",enableMouse:"e",timeElapsed:!0,toggleStatistics:"q",selectHighestBitrate:!0};class r{constructor(t="",e="",i="",s="",r="",l="",a=!0,d=""){this._chromeController||(this._chromeController=new o);const c=this;this._chromeController.getSync(n,t=>{c._selectHighestBitrate=t.selectHighestBitrate}),this._zoomIn=t,this._zoomOut=e,this._resetZoom=i,this._fullZoom=s,this._disableMouse=r,this._enableMouse=l,this._timeElapsed=a,this._toggleStatistics=d}get zoomIn(){return this._zoomIn}get zoomOut(){return this._zoomOut}get resetZoom(){return this._resetZoom}get fullZoom(){return this._fullZoom}get disableMouse(){return this._disableMouse}get enableMouse(){return this._enableMouse}get timeElapsed(){return this._timeElapsed}get toggleStatistics(){return this._toggleStatistics}get selectHighestBitrate(){return this._selectHighestBitrate}static get optionKeys(){return new r("+","-",",",".","d","e",!0,"q")}static getPromise(){return(new o).getSyncPromise(n)}}var l=r;var a=class{static initialize(){void 0===this._statisticParent&&(this._fps=document.createElement("div"),this._resolution=document.createElement("div"),this._statisticParent=document.createElement("div"),this._statisticParent.classList.add("statistics","hidden"),this._statisticParent.appendChild(this._fps),this._statisticParent.appendChild(this._resolution),this._video.parentElement.appendChild(this._statisticParent))}static toggle(t){void 0!==t&&null!==t&&void 0!==t.getHtmlVideo&&null!==t.getHtmlVideo&&(this._video=t.getHtmlVideo),this.toggleUi(),this._statisticParent.classList.contains("hidden")?this.disable():this.enable()}static toggleUi(){this.initialize(),this._statisticParent.classList.toggle("hidden")}static enable(){this._resolution.textContent="Resolution: "+this._video.videoWidth+"x"+this._video.videoHeight;const t=function(t){let e,i=t._video.getVideoPlaybackQuality().totalVideoFrames;return function(){const s=t._video.getVideoPlaybackQuality();e=s.totalVideoFrames,t._fps.textContent="FPS: "+(e-i)+" (Dropped: "+s.droppedVideoFrames+")",i=e}}(this);this._interval=setInterval(function(){t()},1e3)}static disable(){clearInterval(this._interval)}};const d=l.optionKeys;class c{static getAction(t){const e=this._classDictionary[t];if(void 0===e)throw"Action "+t+" was not found.";return new e}static get actionNames(){return Object.keys(this._classDictionary)}}c._classDictionary={zoomIn:class{constructor(){this.key=d.zoomIn}execute(t){t.addZoom(5)}},zoomOut:class{constructor(){this.key=d.zoomOut}execute(t){t.addZoom(-5)}},resetZoom:class{constructor(){this.key=d.resetZoom}execute(t){t.setZoom(100)}},fullZoom:class{constructor(){this.key=d.fullZoom}execute(t){t.setZoom(135)}},disableMouse:class{constructor(){this.key=d.disableMouse}execute(t){t.getHtmlVideo.requestPointerLock()}},enableMouse:class{constructor(){this.key=d.enableMouse}execute(){document.exitPointerLock()}},toggleStatistics:class{constructor(){this.key=d.toggleStatistics}execute(t){a.toggle(t)}}};var h=class{static get videoBitrateClass(){return"player-streams"}};var u=class{static getResult(t,e){return void 0===t||null===t?e:t}static get videoBitrates(){let t=document.getElementsByClassName(h.videoBitrateClass);return t&&(t=t[0].children)&&(t=t[0].children)&&(t=t[1].getElementsByTagName("option")).length>0&&(this._videoBitrates=t),this.getResult(this._videoBitrates,[])}};var m=class{getVideoBitrates(){this.toggleBitrateSelectionWindow();let t=this.readBitrates();return this.toggleBitrateSelectionWindow(),t}readBitrates(){let t=[];const e=u.videoBitrates;for(let i=0;i<e.length;i++)t[i]=e.item(i).textContent;return t}changeBitrate(t,e=!1){this.toggleBitrateSelectionWindow();const i=u.videoBitrates,s=this.readBitrates(),o=e?s.length-1:s.indexOf(t);if(o>=0){const t=i.item(o);if(t)return this.overrideBitrate(t),t.textContent;this.toggleBitrateSelectionWindow()}}overrideBitrate(t){t.parentElement.value=t.textContent,t.parentElement.parentElement.parentElement.lastChild.firstChild.click()}toggleBitrateSelectionWindow(){const t=new KeyboardEvent("keydown",{key:"S",ctrlKey:!0,shiftKey:!0,altKey:!0,bubbles:!0,keyCode:83,which:83,charCode:83}),e=document.dispatchEvent(t);return e||console.error("KeyboardEvent was not successful!"),e}};var _=class{constructor(){this._videoBitrateController=new m}createUi(t){const e=document.querySelector(".video-title");if(void 0===e||null===e)return;const i=this.createButton("+","Zoom in (Key: +)");this.addButtonClickListener(t,i,"zoomIn");const s=this.createButton("-","Zoom out (Key: -)");this.addButtonClickListener(t,s,"zoomOut");const o=this.createButton("16:9","Reset zoom (Key: ,)",!0);this.addButtonClickListener(t,o,"resetZoom");const n=this.createButton("21:9","Zoom to 21:9 (Key: .)",!0);this.addButtonClickListener(t,n,"fullZoom");const r=this.createAndGetVideoBitrates(),l=document.createElement("div");l.classList.add("uiContainer"),l.appendChild(i),l.appendChild(s),l.appendChild(o),l.appendChild(n),l.appendChild(r),e.parentNode.insertBefore(l,e.nextSibling)}createButton(t,e,i=!1){const s=document.createElement("div");s.classList.add("uiContainer");const o=document.createElement("button");return o.textContent=t,o.classList.add("uiButtons"),i&&o.classList.add("largeUiButtons"),o.title=e,s.appendChild(o),s}addButtonClickListener(t,e,i){e.addEventListener("click",e=>{e.stopPropagation(),c.getAction(i).execute(t)},!1)}createAndGetVideoBitrates(){const t=document.createElement("div");t.classList.add("tooltip","hidden"),this._videoBitrateController.getVideoBitrates().forEach(e=>{const i=document.createElement("div");i.classList.add("tooltipChild"),i.textContent=e,i.setAttribute("bitrate",e),t.appendChild(i)});const e=this.createButton("âš™","Video quality (Highest number = best quality)");return e.appendChild(t),this.initTooltip(e,t),this.initTooltipChildren(t),this.selectHighestBitrateIfOptionIsSet(t),e}initTooltip(t,e){t.addEventListener("mouseenter",()=>{e.classList.remove("hidden")},!1),t.addEventListener("mouseleave",()=>{setTimeout(()=>{e.classList.contains("hidden")||t.parentElement.querySelector(":hover")===t||e.classList.add("hidden")},1e3)},!1)}initTooltipChildren(t){const e=this;t.childNodes.forEach(i=>{const s=i;s.addEventListener("click",()=>{void 0!==e._videoBitrateController.changeBitrate(s.getAttribute("bitrate"))&&(this.selectTooltipChild(t,s),setTimeout(()=>t.classList.add("hidden"),500))},!1)})}selectTooltipChild(t,e){t.childNodes.forEach(t=>t.classList.remove("tooltipChildSelected")),e.classList.add("tooltipChildSelected")}selectHighestBitrateIfOptionIsSet(t){const e=this;l.getPromise().then(i=>{if(!i.selectHighestBitrate)return;const s=e._videoBitrateController.changeBitrate("",!0);e.selectTooltipChild(t,t.querySelector("[bitrate='"+s+"']"))})}};var g=class{get hours(){return this._hours}get minutes(){return this._minutes}get seconds(){return this._seconds}setCurrentTime(t){this._hours=Math.floor(t/60/60),this._minutes=Math.floor(t/60),this._seconds=Math.floor(t-60*this._minutes),this._minutes-=60*this._hours}toString(){return(this._hours>0?this._hours+":"+this.addLeadingZero(this._minutes):this._minutes)+":"+this.addLeadingZero(this._seconds)}addLeadingZero(t){return((t+"").length<2?"0":"")+t}};var v=class{constructor(){this._timeModel=new g,this._optionKeys=l.optionKeys}setTimeInterval(t){if(this._video=t,this._optionKeys.timeElapsed){void 0!==this._timeInterval&&clearInterval(this._timeInterval);const t=this;this._timeInterval=setInterval(function(){t.initTime()},500)}}initTime(){""!==this._video.src&&(this.initElapsedTime(),clearInterval(this._timeInterval),this._timeInterval=void 0)}initElapsedTime(){this._htmlTime=document.createElement("time"),this._htmlTime.classList.add("elapsedTime","time-remaining__time"),this._htmlTime.textContent="0:00";const t=document.createElement("div");t.classList.add("PlayerControls--control-element","text-control"),t.style.textAlign="left",t.appendChild(this._htmlTime);const e=document.getElementsByClassName("PlayerControls--control-element progress-control")[0];e.insertBefore(t,e.firstChild);const i=this;this._video.addEventListener("timeupdate",function(){i.updateTime()},!1)}updateTime(){void 0!==this._video&&(this._timeModel.setCurrentTime(this._video.currentTime),this._htmlTime.textContent=this._timeModel.toString())}};new class{constructor(){this._defaultKeys=l.optionKeys;const t=new _,e=new v;this._videoController=new s(t,e),this.initialize()}initialize(){this._videoController.start(),document.addEventListener("click",()=>{setTimeout(()=>{this._videoController.start()},2e3)},!1),document.addEventListener("keydown",t=>{this._videoController.start();const e=c.actionNames.filter(e=>this._defaultKeys[e]===t.key)[0];try{c.getAction(e).execute(this._videoController)}catch(t){}},!1)}}}]);